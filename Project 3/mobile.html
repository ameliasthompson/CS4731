<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Project 3 Part 1</title>
 
	<script id="flat-shader" type="x-shader/x-vertex">
  attribute vec4 vPosition;
  attribute vec4 vNormal;
  uniform vec4 diffProd; // Lighting products
  uniform vec4 specProd;
  uniform vec4 ambProd;
  uniform vec3 lightPos; // Light position
  uniform mat4 proj;     // Projection matrix
  uniform mat4 modView;  // Model view matrix
  
  varying vec4 col;

  void main() {
    // Lighting
    vec3 pos = (modView * vPosition).xyz;

    vec3 L = normalize(lightPos - pos);
    vec3 N = normalize(modView * vNormal).xyz;
    vec3 V = normalize(-pos);
    vec3 R = (2.0 * dot(L, N) * N) - L;

    vec4 diffuse = diffProd * dot(L, N);
    vec4 ambient = ambProd;
    vec4 specular = specProd * pow(max(dot(V,R), 0.0), 10.0);

    col = diffuse + specular + ambient;
    col.a = 1.0;

    col = vec4(1.0, 1.0, 1.0, 1.0);

    // Position
    gl_Position = proj * modView * vPosition;
  }
  </script>
  
  <script id="smooth-shader" type="x-shader/x-vertex">
  attribute vec4 vPosition;
  attribute vec4 vNormal;
  uniform vec4 diffProd; // Lighting products
  uniform vec4 specProd;
  uniform vec4 ambProd;
  uniform vec3 lightPos; // Light position
  uniform mat4 proj;     // Projection matrix
  uniform mat4 modView;  // Model view matrix
  
  varying vec4 col;

  void main() {
    // Lighting
    vec3 pos = (modView * vPosition).xyz;

    vec3 L = normalize(lightPos - pos);
    vec3 N = normalize(modView * vNormal).xyz;
    vec3 V = normalize(-pos);
    vec3 R = (2.0 * dot(L, N) * N) - L;

    vec4 diffuse = diffProd * dot(L, N);
    vec4 ambient = ambProd;
    vec4 specular = specProd * pow(max(dot(V,R), 0.0), 10.0);

    col = diffuse + specular + ambient;
    col.a = 1.0;

    //col = vec4(1.0, 1.0, 1.0, 1.0);

    // Position
    gl_Position = proj * modView * vPosition;
  }
  </script>
	
	<script id="frag-shader" type="x-shader/x-fragment">
  precision mediump float;

  varying vec4 col;

  void main() {
    gl_FragColor = col;
  }
	</script>
	
    <script src="lib/webgl-utils.js"></script>
    <script src="lib/initShaders.js"></script>
    <script src="lib/MV.js"></script>
    
    <script src="mobile.js"></script>

  </head>
 
  <body onload="main()" style="background-color: black; color: white;">
  
    <canvas id="webgl" width="400" height="400">
    	Please use a browser that supports the "canvas" tag.
    </canvas>

  </body>
</html>
